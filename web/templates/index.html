{{ define "index" }}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ if .Title }}{{ .Title }}{{ else }}{{ .Name }}{{ end }} â€“ Laebel</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" type="image/png" href="/static/img/laebel.svg">
    <script src="/static/js/htmx.min.js"></script>
    <script src="/static/js/sse.js"></script>
</head>
<body hx-ext="sse" sse-connect="/events?stream=updates" sse-close="close">
<header id="brand" title="This documentation site is generated by Laebel.">
    <a href="https://github.com/henrikje/laebel"><img src="/static/img/laebel.svg" alt="Laebel logo" id="logo"></a>
    <p class="title"><a href="https://github.com/henrikje/laebel">Laebel</a></p>
</header>
<header id="project">
    <h1 class="title">
        {{ if .Icon }}<img src="{{ .Icon }}" alt="{{ .Name }} logo" id="icon" style="">{{ end }}
        {{ if .Title }}{{ .Title }}{{ else }}<code>{{ .Name }}</code>{{ end }}
    </h1>
    {{ if .Description }}<p class="description">{{ .Description }}</p>{{ end }}
    {{ if .Links }}
        <ul>
            <li class="links">
                <strong>Links</strong>: {{ range $index, $link := .Links }}{{ if $index }}, {{ end }}<a
                href="{{ $link.URL }}">{{ $link.Label }}</a>{{end}}
            </li>
        </ul>
    {{ end }}
</header>
{{ template "main" . }}
<style hx-trigger="sse:status" hx-get="/graph-status.css" hx-swap="innerHTML">
    {{ template "serviceGraphStatus" . }}
</style>
</body>
<script type="module">
    import mermaid from '/static/js/mermaid.esm.min.mjs';
    mermaid.initialize();
    document.body.addEventListener('htmx:afterSwap', async function(evt) {
        await mermaid.run();
    });
</script>
<script>
    function copyPreviousText(button) {
        const previousElement = button.previousElementSibling;
        if (previousElement) {
            const text = previousElement.textContent;
            navigator.clipboard.writeText(text)
        }
    }
</script>
</html>
{{ end }}