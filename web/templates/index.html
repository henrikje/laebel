<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docodash</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
<h1>Docodash</h1>

{{ if .ContainersGroupedByServiceName }}
{{ range $serviceName, $containersInService := .ContainersGroupedByServiceName }}
<div class="service">
    <h2>Service: {{ $serviceName }}</h2>
    {{ $linksForService := index $.LinksByService $serviceName }}
    {{ if $linksForService }}
    <h3>Links</h3>
    <ul>
        {{ range $linksForService }}
        <li><a href="{{ .url }}">{{ .label }}</a></li>
        {{ end }}
    </ul>
    {{ end}}

    <h3>Containers</h3>
    <ul id="containers">
        {{ range $containersInService }}
        <li>
            <details class="container">
                <summary><h3>{{ .ID }}</h3></summary>
                <p><strong>Image:</strong> {{ .Image }}</p>
                <p><strong>State:</strong> {{ .State }}</p>
                {{ if .Labels }}
                <h4>Labels:</h4>
                <ul>
                    {{ range $key, $value := .Labels }}
                    <li><strong>{{ $key }}:</strong> {{ $value }}</li>
                    {{ end }}
                </ul>
                {{ else }}
                <p>No labels</p>
                {{ end }}
            </details>
        </li>
        {{ end }}
    </ul>
</div>
{{ end }}
{{ else }}
<p>No containers are currently running.</p>
{{ end }}
</body>
</html>